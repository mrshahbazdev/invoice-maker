# 发票引擎：完整指南

该平台的核心逻辑围绕高度先进的自动化发票引擎，旨在帮助您完全无缝地生成专业账单。本指南涵盖了发票生成流程中可用的完整功能集。

---

## 1. 开具新发票
创建发票非常简单。导航到您的**发票**模块，然后单击**创建新发票**。 
这将启动交互式拖放文档生成器。

### 发票元数据
在添加订单项之前，您将设置定义文档的核心元数据：
- **发票编号：** 默认情况下，系统会自动递增您的发票编号（例如，INV-0001 变为 INV-0002）。但是，如果您使用自定义格式，则可以手动覆盖全局设置中的前缀和编号方案。
- **发布日期：** 文档正式生成的日期。默认为今天。
- **到期日/付款条款：** 定义您预计收到款项的时间。您可以选择确切的日期或使用动态术语，例如“Net 15”、“Net 30”或“收据到期”。系统会根据签发日期自动计算出准确的到期日。
- **客户选择：** 从您的 CRM 中选择现有客户或快速定义一个新的内联客户，而无需离开构建器。

---

## 2. 管理行项目
行项目部分是您构建实际账单的地方。 

### 添加产品和服务
您可以通过两种不同的方式添加订单项：
1. **手动输入：** 将完全自定义的描述、任意价格和具体数量直接输入空行。这非常适合定制项目工作或独特的服务费用。
2. **从库存：** 单击“添加产品”下拉列表，从您的产品/服务目录中选择预先保存的项目。系统将立即注入该商品的预定义描述、单价和默认税率，为您节省大量时间。

### 实时数学和税收
整个表是数学积分的。
- 当您调整数量或单价时，行总计会立即更新。
- **行项目税：** 您可以为单个行项目分配多个税率（例如，地区增值税和辅助销售税）。系统会为每一行动态且单独地计算这些税费。
- **拖放重新排序：** 抓住任意行左侧的手柄，以重新排序项目在最终 PDF 上的显示方式。无论顺序如何，数学计算都会继续完美。

---

## 3. 折扣和全局调整
有时您需要调整各个行项目之外的总计。

- **全局折扣：** 在发票生成器的底部，您可以注入全局折扣。您可以选择此折扣是固定金额（例如“50 美元折扣”）还是小计的百分比（例如“10% 折扣”）。总计会动态更新以反映节省的费用。
- **注释和条款：** 向客户添加个性化消息（例如“感谢您的惠顾！”）并定义严格的法律条款和条件（例如“逾期付款将收取 5% 的罚款”）。

---

## 4. 发送和交付
一旦您的发票完成，就可以付款了。

### 自动电子邮件发送
单击“发送发票”将打开电子邮件启动器。
- 系统自动加载分配给您客户的主电子邮件地址。
- 您可以大量自定义电子邮件的主题行和 HTML 正文。如果您在 CRM 中为此客户定义了特定模板，则会预加载该模板。
- 该平台将高度压缩、生成精美的 PDF 文档直接附加到外发电子邮件中。

### 客户端“Magic Link”
至关重要的是，该电子邮件还包含一个“Magic Link”。当您的客户单击此链接时，他们将直接进入安全、无密码的客户门户，在那里他们可以动态查看发票。

### 状态跟踪
发票发送后，系统开始自动跟踪其状态：
- 您将准确地看到客户何时打开电子邮件并在线查看文档（状态从“已发送”更改为“已查看”）。
- 如果到期日已过，系统会用鲜明的红色 **逾期** 徽章标记发票。
- 记录付款后（手动或通过 Stripe），余额会更新。如果部分支付，则转为“部分”。如果完全结算，则将其存档为“已付款”。